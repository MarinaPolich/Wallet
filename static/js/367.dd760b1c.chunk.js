"use strict";(self.webpackChunkwallet=self.webpackChunkwallet||[]).push([[367],{5367:function(n,t,e){e.r(t),e.d(t,{default:function(){return kn}});var i,r,a,o,s,d,c,l,p,u,x,h,f,m,g,v,w,Z,b,y,j,k,S,P,C,D,F=e(2982),z=e(1413),A=e(5861),E=e(885),W=e(4687),I=e.n(W),T=e(2791),q=e(2388),M=e(168),Y=e(7691),L=e(4651),R=Y.ZP.div(i||(i=(0,M.Z)(["\n  @media screen and (min-width: 768.99px) {\n    display: flex;\n    gap: 32px;\n  }\n  @media screen and (min-width: 1279.99px) {\n  }\n"]))),B=Y.ZP.div(r||(r=(0,M.Z)(["\n  width: 280px;\n  @media screen and (min-width: 768.99px) {\n    width: 236px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 288px;\n  }\n"]))),H=Y.ZP.h2(a||(a=(0,M.Z)(["\n  font-size: 30px;\n  font-weight: 400;\n  margin-bottom: 8px;\n  @media screen and (min-width: 768.99px) {\n    margin-bottom: 20px;\n  }\n"]))),$=Y.ZP.div(o||(o=(0,M.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size: 18px;\n  font-weight: 700;\n"]))),G=Y.ZP.div(s||(s=(0,M.Z)(["\n  margin-top: 25px;\n  width: 280px;\n  @media screen and (min-width: 768.99px) {\n    width: 336px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 396px;\n  }\n"]))),J=Y.ZP.form(d||(d=(0,M.Z)(["\n  width: 280px;\n  height: 120px;\n  position: relative;\n  @media screen and (min-width: 768.99px) {\n    display: flex;\n    gap: 16px;\n    width: 336px;\n    height: 50px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    gap: 32px;\n    width: 396px;\n  }\n"]))),K=Y.ZP.label(c||(c=(0,M.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: #fff;\n  border-radius: 30px;\n  width: 280px;\n  height: 50px;\n  @media screen and (min-width: 768.99px) {\n    width: 160px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 182px;\n  }\n"]))),N=Y.ZP.label(l||(l=(0,M.Z)(["\n  position: absolute;\n  top: 70px;\n  left: 0;\n  background-color: #fff;\n  border-radius: 30px;\n  width: 280px;\n  height: 50px;\n  @media screen and (min-width: 768.99px) {\n    width: 160px;\n    top: 0;\n    left: 176px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 182px;\n    top: 0;\n    left: 214px;\n  }\n"]))),O=Y.ZP.select(p||(p=(0,M.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 1;\n  appearance: none;\n  background-color: transparent;\n  height: 50px;\n  width: 100%;\n  border-radius: 30px;\n  padding-left: 20px;\n  padding-right: 20px;\n\n  @media screen and (min-width: 768.99px) {\n    width: 160px;\n    margin-top: 0;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 182px;\n    top: 0;\n  }\n"]))),Q=(0,Y.ZP)(L.qhg)(u||(u=(0,M.Z)(["\n  width: 24px;\n  height: 18px;\n  position: absolute;\n  top: 50%;\n  right: 0;\n  transform: translate(-20px, -50%);\n  ",":focus + & {\n    transform: translate(-20px, -50%) rotate(180deg);\n  }\n  z-index: 0;\n \n"])),O),U=Y.ZP.div(x||(x=(0,M.Z)(["\n  display: flex;\n  justify-content: space-between;\n  height: 58px;\n  background-color: #fff;\n  border-radius: 30px;\n  margin-top: 20px;\n"]))),V=Y.ZP.div(h||(h=(0,M.Z)(["\n  font-weight: 700;\n  font-size: 18px;\n  padding-left: 15px;\n  padding-right: 15px;\n  line-height: 58px;\n  cursor: pointer;\n  &:hover,\n  &:focus {\n    color: rgb(36, 204, 167);\n  }\n  @media screen and (min-width: 768.99px) {\n    padding-left: 20px;\n    padding-right: 20px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    padding-left: 28px;\n    padding-right: 28px;\n  }\n"]))),X=Y.ZP.li(f||(f=(0,M.Z)(["\n  display: flex;\n  justify-content: start;\n  align-items: center;\n  line-height: 52px;\n  padding-left: 15px;\n  padding-right: 15px;\n  border-bottom: 1px solid #dcdcdf;\n  box-shadow: 0px 1px 0px rgba(255, 255, 255, 0.6);\n  text-align: left;\n  cursor: pointer;\n  div {\n    margin-left: 5px;\n  }\n  div + div {\n    margin-left: auto;\n  }\n\n  &::before {\n    content: '';\n    display: block;\n    width: 24px;\n    height: 24px;\n    border-radius: 2px;\n    background-color: ",";\n  }\n"])),(function(n){return n.col})),_=Y.ZP.div(m||(m=(0,M.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 16px;\n  padding-left: 15px;\n  padding-right: 15px;\n"]))),nn=e(8268),tn=e(3623),en=e(9434),rn=e(9085),an=(e(5462),e(2426)),on=e.n(an),sn=e(4164),dn=Y.ZP.div(g||(g=(0,M.Z)(["\n  position: fixed;\n  z-index: 2;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n"]))),cn=Y.ZP.div(v||(v=(0,M.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  z-index: 10;\n  transform: translate(-50%, -50%);\n  background-color: #ddd;\n  width: 280px;\n  @media screen and (min-width: 767.99px) {\n    width: 360px;\n  }\n"]))),ln=Y.ZP.div(w||(w=(0,M.Z)(["\n  color: #333;\n  font-size: 14px;\n  font-weight: 700;\n  width: 240px;\n  padding: 8px;\n"]))),pn=Y.ZP.div(Z||(Z=(0,M.Z)([""]))),un=Y.ZP.div(b||(b=(0,M.Z)(["\n  display: none;\n  background-color: #fff;\n  @media screen and (min-width: 767.99px) {\n    display: flex;\n  }\n"]))),xn=Y.ZP.span(y||(y=(0,M.Z)(["\n  display: inline-block;\n  padding: 8px;\n  font-weight: 500;\n  background-color: #fff;\n  text-align: ",";\n  &:nth-child(2) {\n    margin-left: 12px;\n  }\n  &:nth-child(3) {\n    margin-left: auto;\n  }\n"])),(function(n){return n.position})),hn=Y.ZP.div(j||(j=(0,M.Z)(["\n  display: flex;\n  flex-direction: column;\n  border: 1px solid #222;\n\n  @media screen and (min-width: 767.99px) {\n    flex-direction: row;\n    border: none;\n    width: 100%;\n  }\n"]))),fn=Y.ZP.span(k||(k=(0,M.Z)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 8px;\n  font-size: 12px;\n  border-bottom: 1px solid #dcdcdf;\n  box-shadow: 0px 1px 0px rgba(255, 255, 255, 0.6);\n\n  @media screen and (min-width: 767.99px) {\n    display: inline-block;\n    text-align: ",";\n    &:last-child {\n      margin-left: auto;\n    }\n  }\n"])),(function(n){return n.position})),mn=Y.ZP.span(S||(S=(0,M.Z)(["\n  text-align: left;\n  @media screen and (min-width: 767.99px) {\n    display: none;\n  }\n"]))),gn=Y.ZP.span(P||(P=(0,M.Z)(["\n  text-align: right;\n"]))),vn=Y.ZP.span(C||(C=(0,M.Z)(["\n  text-align: right;\n  color: #ff6596;\n"]))),wn=Y.ZP.span(D||(D=(0,M.Z)(["\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  width: 24px;\n  height: 24px;\n  text-align: center;\n  font-weight: 700;\n  color: #fff;\n  background-color: rgba(0, 0, 0, 0.6);\n  border: none;\n  border-radius: 50%;\n"]))),Zn=e(3329);function bn(n){var t=n.showinfo,e=n.setShowinfo;return console.log("showinfo ======",t),(0,sn.createPortal)((0,Zn.jsx)(dn,{children:(0,Zn.jsxs)(cn,{children:[(0,Zn.jsxs)(ln,{children:[" ",t.caption]}),(0,Zn.jsxs)(pn,{children:[(0,Zn.jsxs)(un,{children:[(0,Zn.jsx)(xn,{position:"left",children:"Date"}),(0,Zn.jsx)(xn,{position:"left",children:"Comment"}),(0,Zn.jsx)(xn,{children:"Sum"})]}),(0,Zn.jsx)("div",{style:{maxHeight:"60vh",overflow:"auto"},children:t.data.map((function(n){return(0,Zn.jsxs)(hn,{children:[(0,Zn.jsxs)(fn,{position:"left",children:[(0,Zn.jsx)(mn,{children:"Date"}),(0,Zn.jsx)(gn,{children:on()(n.transactionDate).format("DD.MM.YY")})]}),(0,Zn.jsxs)(fn,{position:"left",children:[(0,Zn.jsx)(mn,{children:"Comment"}),(0,Zn.jsx)(gn,{children:n.comment})]}),(0,Zn.jsxs)(fn,{position:"right",children:[(0,Zn.jsx)(mn,{children:"Sum"}),(0,Zn.jsx)(vn,{children:-n.amount})]})]},n.id)}))})]}),(0,Zn.jsx)(wn,{onClick:function(){return e({showinfo:!1,caption:"",data:[]})},type:"button",children:"x"})]})}),document.querySelector("#portal"))}var yn=e(9245);nn.kL.register(nn.qi,nn.u);var jn=["#fed057","#FFD8D0","#FF6596","#C5BAFF","#6E78E8","#81E1FF","#00AD84","#4A56E2","#FD9498","#A6A6A6"],kn=function(){var n=(0,T.useState)(null),t=(0,E.Z)(n,2),e=t[0],i=t[1],r=(0,T.useState)(null),a=(0,E.Z)(r,2),o=a[0],s=a[1],d=(0,T.useState)({showinfo:!1,caption:"",data:[]}),c=(0,E.Z)(d,2),l=c[0],p=c[1],u=(0,T.useRef)(),x=(0,T.useRef)(),h=(0,en.v9)((function(n){return n.finance.transactions}));console.log(o),console.log(e),console.log(h);var f=new Set(h.map((function(n){return n.transactionDate.slice(0,4)}))),m=new Set(h.map((function(n){return n.transactionDate.slice(5,7)}))),g=null===e||void 0===e?void 0:e.categoriesSummary.filter((function(n){return n.total<0})).length,v={labels:null===e||void 0===e?void 0:e.categoriesSummary.filter((function(n){return n.total<0})).map((function(n){return n.name})),datasets:[{label:"expense",data:null===e||void 0===e?void 0:e.categoriesSummary.filter((function(n){return n.total<0})).map((function(n){return-n.total})),backgroundColor:jn.slice(0,g),borderColor:jn.slice(0,g),borderWidth:1}]};function w(n){return Z.apply(this,arguments)}function Z(){return(Z=(0,A.Z)(I().mark((function n(t){var e,r,a;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),""!==u.current.value||""===x.current.value){n.next=3;break}return n.abrupt("return");case 3:if(""!==u.current.value||""!==x.current.value){n.next=14;break}return n.prev=4,n.next=7,q.Z.get("/api/transactions-summary");case 7:e=n.sent,i(e.data),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(4),console.log(n.t0);case 14:if(""===u.current.value||""!==x.current.value){n.next=25;break}return n.prev=15,n.next=18,q.Z.get("/api/transactions-summary?year=".concat(u.current.value));case 18:r=n.sent,i(r.data),n.next=25;break;case 22:n.prev=22,n.t1=n.catch(15),console.log(n.t1);case 25:if(""===u.current.value||""===x.current.value){n.next=36;break}return n.prev=26,n.next=29,q.Z.get("/api/transactions-summary?month=".concat(x.current.value,"&year=").concat(u.current.value));case 29:a=n.sent,i(a.data),n.next=36;break;case 33:n.prev=33,n.t2=n.catch(26),console.log(n.t2);case 36:case"end":return n.stop()}}),n,null,[[4,11],[15,22],[26,33]])})))).apply(this,arguments)}function b(n){var t=n.currentTarget.dataset.name,e=o.find((function(n){return n.name===t})).id,i=h.filter((function(n){return n.categoryId===e})),r="Exspenses by category "+t;""!==u.current.value&&(i=i.filter((function(n){return n.transactionDate.slice(0,4)===u.current.value})),r=r+" for a period: year "+u.current.value),""!==u.current.value&&""!==x.current.value&&(i=i.filter((function(n){return n.transactionDate.slice(5,7)===x.current.value})),r=r+" month "+x.current.value),p({showinfo:!0,caption:r,data:i})}return(0,T.useEffect)((function(){function n(){return(n=(0,A.Z)(I().mark((function n(){var t,e;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,q.Z.get("/api/transactions-summary");case 3:return t=n.sent,n.next=6,q.Z.get("/api/transaction-categories");case 6:return e=n.sent,n.abrupt("return",{summary:t.data,categories:e.data});case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))).apply(this,arguments)}(function(){return n.apply(this,arguments)})().then((function(n){var t=n.summary,e=n.categories;i(t),s(e)}))}),[]),(0,Zn.jsx)(Zn.Fragment,{children:e?(0,Zn.jsxs)(R,{children:[(0,Zn.jsxs)(B,{style:{marginLeft:"16px"},children:[(0,Zn.jsx)(H,{children:"Statistic"}),(0,Zn.jsxs)("div",{style:{position:"relative"},children:[(0,Zn.jsxs)($,{children:["\u20b4 ",e.periodTotal]}),(0,Zn.jsx)(tn.$I,{options:{cutout:"70%",animation:{animateScale:!0}},data:v})]})]}),(0,Zn.jsxs)(G,{children:[(0,Zn.jsxs)(J,{onSubmit:w,children:[(0,Zn.jsxs)(K,{children:[(0,Zn.jsxs)(O,{name:"year",ref:u,onChange:w,children:[(0,Zn.jsx)("option",{value:"",children:"Year"}),Array.from(f).map((function(n){return(0,Zn.jsx)("option",{value:n,children:n},n)}))]}),(0,Zn.jsx)(Q,{})]}),(0,Zn.jsxs)(N,{children:[(0,Zn.jsxs)(O,{name:"month",ref:x,onChange:w,children:[(0,Zn.jsx)("option",{value:"",children:"Month"}),Array.from(m).map((function(n){return(0,Zn.jsx)("option",{value:n,children:n},n)}))]}),(0,Zn.jsx)(Q,{})]})]}),(0,Zn.jsxs)(U,{children:[(0,Zn.jsx)(V,{"data-sort":"=",onClick:function(n){var t=n.currentTarget;"="===t.dataset.sort||"d"===t.dataset.sort?(t.dataset.sort="i",i((function(n){return(0,z.Z)((0,z.Z)({},n),{},{categoriesSummary:(0,F.Z)(n.categoriesSummary.sort((function(n,t){return n.name>t.name?1:-1})))})}))):"i"===t.dataset.sort&&(t.dataset.sort="d",i((function(n){return(0,z.Z)((0,z.Z)({},n),{},{categoriesSummary:(0,F.Z)(n.categoriesSummary.sort((function(n,t){return n.name<t.name?1:-1})))})})))},title:"click to sort",children:"Category"}),(0,Zn.jsx)(V,{"data-sort":"=",onClick:function(n){var t=n.currentTarget;"="===t.dataset.sort||"d"===t.dataset.sort?(t.dataset.sort="i",i((function(n){return(0,z.Z)((0,z.Z)({},n),{},{categoriesSummary:(0,F.Z)(n.categoriesSummary.sort((function(n,t){return-n.total>-t.total?1:-1})))})}))):"i"===t.dataset.sort&&(t.dataset.sort="d",i((function(n){return(0,z.Z)((0,z.Z)({},n),{},{categoriesSummary:(0,F.Z)(n.categoriesSummary.sort((function(n,t){return-n.total<-t.total?1:-1})))})})))},title:"click to sort",children:"Sum"})]}),(0,Zn.jsx)("ul",{children:e.categoriesSummary.filter((function(n){return n.total<0})).map((function(n,t){var e=n.name,i=n.total;return(0,Zn.jsxs)(X,{col:jn[t],onClick:b,"data-name":e,title:"click for detailed information",children:[(0,Zn.jsx)("div",{children:e})," ",(0,Zn.jsx)("div",{children:-i})]},e)}))}),(0,Zn.jsxs)(_,{children:[(0,Zn.jsx)("div",{style:{fontWeight:700},children:"Expenses:"}),(0,Zn.jsx)("div",{style:{fontWeight:700,color:"#FF6596"},children:-e.expenseSummary})]}),(0,Zn.jsxs)(_,{children:[(0,Zn.jsx)("div",{style:{fontWeight:700},children:"Income:"}),(0,Zn.jsx)("div",{style:{fontWeight:700,color:"#24CCA7"},children:e.incomeSummary})]})]}),(0,Zn.jsx)(rn.Ix,{}),l.showinfo&&(0,Zn.jsx)(bn,{showinfo:l,setShowinfo:p})]}):(0,Zn.jsx)(yn.a,{})})}}}]);
//# sourceMappingURL=367.dd760b1c.chunk.js.map