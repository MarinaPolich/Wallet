"use strict";(self.webpackChunkwallet=self.webpackChunkwallet||[]).push([[367],{5367:function(n,t,e){e.r(t),e.d(t,{default:function(){return Sn}});var i,r,a,o,s,d,c,l,p,u,x,h,f,m,g,v,w,Z,b,y,j,k,P,S,C,D,F,z=e(2982),A=e(1413),E=e(5861),W=e(885),I=e(4687),T=e.n(I),q=e(2791),M=e(2388),Y=e(168),L=e(7691),R=e(4651),B=L.ZP.div(i||(i=(0,Y.Z)(["\n  margin-left: auto;\n  margin-right: auto;\n  width: 280px;\n  @media screen and (min-width: 768.99px) {\n    display: flex;\n    gap: 32px;\n    width: 572px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 684px;\n  }\n"]))),H=L.ZP.div(r||(r=(0,Y.Z)(["\n \n  @media screen and (min-width: 768.99px) {\n    width: 236px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 288px;\n  }\n"]))),$=L.ZP.h2(a||(a=(0,Y.Z)(["\n  font-size: 30px;\n  font-weight: 400;\n  margin-bottom: 8px;\n  @media screen and (min-width: 768.99px) {\n    margin-bottom: 20px;\n  }\n"]))),G=L.ZP.div(o||(o=(0,Y.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size: 18px;\n  font-weight: 700;\n"]))),J=L.ZP.div(s||(s=(0,Y.Z)(["\n  margin-top: 25px;\n \n  /* @media screen and (min-width: 768.99px) {\n    width: 336px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 396px;\n  } */\n"]))),K=L.ZP.form(d||(d=(0,Y.Z)(["\n  width: 280px;\n  height: 120px;\n  position: relative;\n  @media screen and (min-width: 768.99px) {\n    display: flex;\n    gap: 16px;\n    width: 336px;\n    height: 50px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    gap: 32px;\n    width: 396px;\n  }\n"]))),N=L.ZP.label(c||(c=(0,Y.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: #fff;\n  border-radius: 30px;\n  width: 280px;\n  height: 50px;\n  @media screen and (min-width: 768.99px) {\n    width: 160px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 182px;\n  }\n"]))),O=L.ZP.label(l||(l=(0,Y.Z)(["\n  position: absolute;\n  top: 70px;\n  left: 0;\n  background-color: #fff;\n  border-radius: 30px;\n  width: 280px;\n  height: 50px;\n  @media screen and (min-width: 768.99px) {\n    width: 160px;\n    top: 0;\n    left: 176px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 182px;\n    top: 0;\n    left: 214px;\n  }\n"]))),Q=L.ZP.select(p||(p=(0,Y.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 1;\n  appearance: none;\n  background-color: transparent;\n  height: 50px;\n  width: 100%;\n  border-radius: 30px;\n  padding-left: 20px;\n  padding-right: 20px;\n\n  @media screen and (min-width: 768.99px) {\n    width: 160px;\n    margin-top: 0;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 182px;\n    top: 0;\n  }\n"]))),U=(0,L.ZP)(R.qhg)(u||(u=(0,Y.Z)(["\n  width: 24px;\n  height: 18px;\n  position: absolute;\n  top: 50%;\n  right: 0;\n  transform: translate(-20px, -50%);\n  ",":focus + & {\n    transform: translate(-20px, -50%) rotate(180deg);\n  }\n  z-index: 0;\n"])),Q),V=L.ZP.div(x||(x=(0,Y.Z)(["\n  display: flex;\n  justify-content: space-between;\n  height: 58px;\n  background-color: #fff;\n  border-radius: 30px;\n  margin-top: 20px;\n"]))),X=L.ZP.div(h||(h=(0,Y.Z)(["\n  font-weight: 700;\n  font-size: 18px;\n  padding-left: 15px;\n  padding-right: 15px;\n  line-height: 58px;\n  cursor: pointer;\n  &:hover,\n  &:focus {\n    color: rgb(36, 204, 167);\n  }\n  @media screen and (min-width: 768.99px) {\n    padding-left: 20px;\n    padding-right: 20px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    padding-left: 28px;\n    padding-right: 28px;\n  }\n"]))),_=L.ZP.ul(f||(f=(0,Y.Z)(["\n  scrollbar-width: thin;\n  min-height: 100px;\n  @media screen and (min-width: 768.99px) {\n    max-height: calc(100vh - 590px);\n    overflow-y: auto;\n  }\n  @media screen and (min-width: 1279.99px) {\n    max-height: calc(100vh - 360px);\n    overflow-y: auto;\n  }\n"]))),nn=L.ZP.li(m||(m=(0,Y.Z)(["\n  display: flex;\n  justify-content: start;\n  align-items: center;\n  line-height: 52px;\n  padding-left: 15px;\n  padding-right: 15px;\n  border-bottom: 1px solid #dcdcdf;\n  box-shadow: 0px 1px 0px rgba(255, 255, 255, 0.6);\n  text-align: left;\n  cursor: pointer;\n  div {\n    margin-left: 5px;\n  }\n  div + div {\n    margin-left: auto;\n  }\n\n  &::before {\n    content: '';\n    display: block;\n    width: 24px;\n    height: 24px;\n    border-radius: 2px;\n    background-color: ",";\n  }\n"])),(function(n){return n.col})),tn=L.ZP.div(g||(g=(0,Y.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 16px;\n  padding-left: 15px;\n  padding-right: 15px;\n"]))),en=e(8268),rn=e(3623),an=e(9434),on=e(9085),sn=(e(5462),e(2426)),dn=e.n(sn),cn=e(4164),ln=L.ZP.div(v||(v=(0,Y.Z)(["\n  position: fixed;\n  z-index: 2;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n"]))),pn=L.ZP.div(w||(w=(0,Y.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  z-index: 10;\n  transform: translate(-50%, -50%);\n  background-color: #ddd;\n  width: 280px;\n  @media screen and (min-width: 767.99px) {\n    width: 360px;\n  }\n"]))),un=L.ZP.div(Z||(Z=(0,Y.Z)(["\n  color: #333;\n  font-size: 14px;\n  font-weight: 700;\n  width: 240px;\n  padding: 8px;\n"]))),xn=L.ZP.div(b||(b=(0,Y.Z)([""]))),hn=L.ZP.div(y||(y=(0,Y.Z)(["\n  display: none;\n  background-color: #fff;\n  @media screen and (min-width: 767.99px) {\n    display: flex;\n  }\n"]))),fn=L.ZP.span(j||(j=(0,Y.Z)(["\n  display: inline-block;\n  padding: 8px;\n  font-weight: 500;\n  background-color: #fff;\n  text-align: ",";\n  &:nth-child(2) {\n    margin-left: 12px;\n  }\n  &:nth-child(3) {\n    margin-left: auto;\n  }\n"])),(function(n){return n.position})),mn=L.ZP.div(k||(k=(0,Y.Z)(["\n  display: flex;\n  flex-direction: column;\n  border: 1px solid #222;\n\n  @media screen and (min-width: 767.99px) {\n    flex-direction: row;\n    border: none;\n    width: 100%;\n  }\n"]))),gn=L.ZP.span(P||(P=(0,Y.Z)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 8px;\n  font-size: 12px;\n  border-bottom: 1px solid #dcdcdf;\n  box-shadow: 0px 1px 0px rgba(255, 255, 255, 0.6);\n\n  @media screen and (min-width: 767.99px) {\n    display: inline-block;\n    text-align: ",";\n    &:last-child {\n      margin-left: auto;\n    }\n  }\n"])),(function(n){return n.position})),vn=L.ZP.span(S||(S=(0,Y.Z)(["\n  text-align: left;\n  @media screen and (min-width: 767.99px) {\n    display: none;\n  }\n"]))),wn=L.ZP.span(C||(C=(0,Y.Z)(["\n  text-align: right;\n"]))),Zn=L.ZP.span(D||(D=(0,Y.Z)(["\n  text-align: right;\n  color: #ff6596;\n"]))),bn=L.ZP.span(F||(F=(0,Y.Z)(["\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  width: 24px;\n  height: 24px;\n  text-align: center;\n  font-weight: 700;\n  color: #fff;\n  background-color: rgba(0, 0, 0, 0.6);\n  border: none;\n  border-radius: 50%;\n"]))),yn=e(3329);function jn(n){var t=n.showinfo,e=n.setShowinfo;return console.log("showinfo ======",t),(0,cn.createPortal)((0,yn.jsx)(ln,{children:(0,yn.jsxs)(pn,{children:[(0,yn.jsxs)(un,{children:[" ",t.caption]}),(0,yn.jsxs)(xn,{children:[(0,yn.jsxs)(hn,{children:[(0,yn.jsx)(fn,{position:"left",children:"Date"}),(0,yn.jsx)(fn,{position:"left",children:"Comment"}),(0,yn.jsx)(fn,{children:"Sum"})]}),(0,yn.jsx)("div",{style:{maxHeight:"60vh",overflow:"auto"},children:t.data.map((function(n){return(0,yn.jsxs)(mn,{children:[(0,yn.jsxs)(gn,{position:"left",children:[(0,yn.jsx)(vn,{children:"Date"}),(0,yn.jsx)(wn,{children:dn()(n.transactionDate).format("DD.MM.YY")})]}),(0,yn.jsxs)(gn,{position:"left",children:[(0,yn.jsx)(vn,{children:"Comment"}),(0,yn.jsx)(wn,{children:n.comment})]}),(0,yn.jsxs)(gn,{position:"right",children:[(0,yn.jsx)(vn,{children:"Sum"}),(0,yn.jsx)(Zn,{children:-n.amount})]})]},n.id)}))})]}),(0,yn.jsx)(bn,{onClick:function(){return e({showinfo:!1,caption:"",data:[]})},type:"button",children:"x"})]})}),document.querySelector("#portal"))}var kn=e(9245);en.kL.register(en.qi,en.u);var Pn=["#fed057","#FFD8D0","#FF6596","#C5BAFF","#6E78E8","#81E1FF","#00AD84","#4A56E2","#FD9498","#A6A6A6"],Sn=function(){var n=(0,q.useState)(null),t=(0,W.Z)(n,2),e=t[0],i=t[1],r=(0,q.useState)(null),a=(0,W.Z)(r,2),o=a[0],s=a[1],d=(0,q.useState)({showinfo:!1,caption:"",data:[]}),c=(0,W.Z)(d,2),l=c[0],p=c[1],u=(0,q.useRef)(),x=(0,q.useRef)(),h=(0,an.v9)((function(n){return n.finance.transactions}));console.log(o),console.log(e),console.log(h);var f=new Set(h.map((function(n){return n.transactionDate.slice(0,4)}))),m=new Set(h.map((function(n){return n.transactionDate.slice(5,7)}))),g=null===e||void 0===e?void 0:e.categoriesSummary.filter((function(n){return n.total<0})).length,v={labels:null===e||void 0===e?void 0:e.categoriesSummary.filter((function(n){return n.total<0})).map((function(n){return n.name})),datasets:[{label:"expense",data:null===e||void 0===e?void 0:e.categoriesSummary.filter((function(n){return n.total<0})).map((function(n){return-n.total})),backgroundColor:Pn.slice(0,g),borderColor:Pn.slice(0,g),borderWidth:1}]};function w(n){return Z.apply(this,arguments)}function Z(){return(Z=(0,E.Z)(T().mark((function n(t){var e,r,a;return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),""!==u.current.value||""===x.current.value){n.next=3;break}return n.abrupt("return");case 3:if(""!==u.current.value||""!==x.current.value){n.next=14;break}return n.prev=4,n.next=7,M.Z.get("/api/transactions-summary");case 7:e=n.sent,i(e.data),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(4),console.log(n.t0);case 14:if(""===u.current.value||""!==x.current.value){n.next=25;break}return n.prev=15,n.next=18,M.Z.get("/api/transactions-summary?year=".concat(u.current.value));case 18:r=n.sent,i(r.data),n.next=25;break;case 22:n.prev=22,n.t1=n.catch(15),console.log(n.t1);case 25:if(""===u.current.value||""===x.current.value){n.next=36;break}return n.prev=26,n.next=29,M.Z.get("/api/transactions-summary?month=".concat(x.current.value,"&year=").concat(u.current.value));case 29:a=n.sent,i(a.data),n.next=36;break;case 33:n.prev=33,n.t2=n.catch(26),console.log(n.t2);case 36:case"end":return n.stop()}}),n,null,[[4,11],[15,22],[26,33]])})))).apply(this,arguments)}function b(n){var t=n.currentTarget.dataset.name,e=o.find((function(n){return n.name===t})).id,i=h.filter((function(n){return n.categoryId===e})),r="Exspenses by category "+t;""!==u.current.value&&(i=i.filter((function(n){return n.transactionDate.slice(0,4)===u.current.value})),r=r+" for a period: year "+u.current.value),""!==u.current.value&&""!==x.current.value&&(i=i.filter((function(n){return n.transactionDate.slice(5,7)===x.current.value})),r=r+" month "+x.current.value),p({showinfo:!0,caption:r,data:i})}return(0,q.useEffect)((function(){function n(){return(n=(0,E.Z)(T().mark((function n(){var t,e;return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,M.Z.get("/api/transactions-summary");case 3:return t=n.sent,n.next=6,M.Z.get("/api/transaction-categories");case 6:return e=n.sent,n.abrupt("return",{summary:t.data,categories:e.data});case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))).apply(this,arguments)}(function(){return n.apply(this,arguments)})().then((function(n){var t=n.summary,e=n.categories;i(t),s(e)}))}),[]),(0,yn.jsx)(yn.Fragment,{children:e?(0,yn.jsxs)(B,{children:[(0,yn.jsxs)(H,{style:{marginLeft:"16px"},children:[(0,yn.jsx)($,{children:"Statistic"}),(0,yn.jsxs)("div",{style:{position:"relative"},children:[(0,yn.jsxs)(G,{children:["\u20b4 ",e.periodTotal]}),(0,yn.jsx)(rn.$I,{options:{cutout:"70%",animation:{animateScale:!0}},data:v})]})]}),(0,yn.jsxs)(J,{children:[(0,yn.jsxs)(K,{onSubmit:w,children:[(0,yn.jsxs)(N,{children:[(0,yn.jsxs)(Q,{name:"year",ref:u,onChange:w,children:[(0,yn.jsx)("option",{value:"",children:"Year"}),Array.from(f).map((function(n){return(0,yn.jsx)("option",{value:n,children:n},n)}))]}),(0,yn.jsx)(U,{})]}),(0,yn.jsxs)(O,{children:[(0,yn.jsxs)(Q,{name:"month",ref:x,onChange:w,children:[(0,yn.jsx)("option",{value:"",children:"Month"}),Array.from(m).map((function(n){return(0,yn.jsx)("option",{value:n,children:n},n)}))]}),(0,yn.jsx)(U,{})]})]}),(0,yn.jsxs)(V,{children:[(0,yn.jsx)(X,{"data-sort":"=",onClick:function(n){var t=n.currentTarget;"="===t.dataset.sort||"d"===t.dataset.sort?(t.dataset.sort="i",i((function(n){return(0,A.Z)((0,A.Z)({},n),{},{categoriesSummary:(0,z.Z)(n.categoriesSummary.sort((function(n,t){return n.name>t.name?1:-1})))})}))):"i"===t.dataset.sort&&(t.dataset.sort="d",i((function(n){return(0,A.Z)((0,A.Z)({},n),{},{categoriesSummary:(0,z.Z)(n.categoriesSummary.sort((function(n,t){return n.name<t.name?1:-1})))})})))},title:"click to sort",children:"Category"}),(0,yn.jsx)(X,{"data-sort":"=",onClick:function(n){var t=n.currentTarget;"="===t.dataset.sort||"d"===t.dataset.sort?(t.dataset.sort="i",i((function(n){return(0,A.Z)((0,A.Z)({},n),{},{categoriesSummary:(0,z.Z)(n.categoriesSummary.sort((function(n,t){return-n.total>-t.total?1:-1})))})}))):"i"===t.dataset.sort&&(t.dataset.sort="d",i((function(n){return(0,A.Z)((0,A.Z)({},n),{},{categoriesSummary:(0,z.Z)(n.categoriesSummary.sort((function(n,t){return-n.total<-t.total?1:-1})))})})))},title:"click to sort",children:"Sum"})]}),(0,yn.jsx)(_,{children:e.categoriesSummary.filter((function(n){return n.total<0})).map((function(n,t){var e=n.name,i=n.total;return(0,yn.jsxs)(nn,{col:Pn[t],onClick:b,"data-name":e,title:"click for detailed information",children:[(0,yn.jsx)("div",{children:e})," ",(0,yn.jsx)("div",{children:-i})]},e)}))}),(0,yn.jsxs)(tn,{children:[(0,yn.jsx)("div",{style:{fontWeight:700},children:"Expenses:"}),(0,yn.jsx)("div",{style:{fontWeight:700,color:"#FF6596"},children:-e.expenseSummary})]}),(0,yn.jsxs)(tn,{children:[(0,yn.jsx)("div",{style:{fontWeight:700},children:"Income:"}),(0,yn.jsx)("div",{style:{fontWeight:700,color:"#24CCA7"},children:e.incomeSummary})]})]}),(0,yn.jsx)(on.Ix,{}),l.showinfo&&(0,yn.jsx)(jn,{showinfo:l,setShowinfo:p})]}):(0,yn.jsx)(kn.a,{})})}}}]);
//# sourceMappingURL=367.6388647a.chunk.js.map